{"version":3,"sources":["js/seat/main.js"],"names":["window","lastTime","prefixes","split","requestAnimationFrame","cancelAnimationFrame","prefix","i","length","callback","element","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","throttle","fn","delay","allowSample","e","getMousePos","posx","posy","event","pageX","pageY","clientX","clientY","document","body","scrollLeft","documentElement","scrollTop","x","y","lineEq","y2","y1","x2","x1","currentVal","m","b","support","transitions","Modernizr","csstransitions","transEndEventNames","transEndEventName","prefixed","onEndTransition","el","onEndCallbackFn","ev","target","removeEventListener","call","addEventListener","container","querySelector","room","rows","slice","querySelectorAll","totalRows","seats","plan","planseats","monitor","video","playCtrl","intro","selectSeatsCtrl","tiltCtrl","tiltRotation","rotateX","rotateY","tilt","winsize","width","innerWidth","height","innerHeight","seat_width","offsetWidth","seats_row","children","side_margin","row_front_gap","row_back","row_gap_amount","perspective","transitionOpts","roomsize","z","initTransform","translateX","translateY","translateZ","roomTransform","init","scaleRoom","applyRoomTransform","initEvents","transform","style","WebkitTransform","applyRoomTransition","settings","WebkitTransition","speed","easing","transition","removeRoomTransition","factor","onSeatSelect","selectSeat","forEach","planseat","onTiltCtrlClick","disableTilt","enableTilt","onMouseMove","mousepos","rotX","rotY","onSelectSeats","classie","remove","add","zoomOutScreen","showTiltCtrl","videoPlay","videoLoad","has","seat","indexOf","previewSeat","st","getComputedStyle","parentNode","tr","getPropertyValue","values","seatCenterX","offsetLeft","tx","ty","abs","offsetHeight","tz","firstRowZ","lastRowZ","minRotY_1","maxRotY_1","initialTranslationX","finalTranslationX","rotY_1","minRotY_2","maxRotY_2","rotY_2","currentTime","play","load"],"mappings":"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","file":"main.35ee1273.js","sourceRoot":"..\\src","sourcesContent":["/**\n * main.js\n * http://www.codrops.com\n *\n * Licensed under the MIT license.\n * http://www.opensource.org/licenses/mit-license.php\n * \n * Copyright 2015, Codrops\n * http://www.codrops.com\n */\n;(function(window) {\n\n\t'use strict';\n\n\t/**\n\t * some helper functions\n\t */\n\t\n\t/**********************************************/\n\t/** https://gist.github.com/desandro/1866474 **/\n\t/**********************************************/\n\tvar lastTime = 0;\n\tvar prefixes = 'webkit moz ms o'.split(' ');\n\t// get unprefixed rAF and cAF, if present\n\tvar requestAnimationFrame = window.requestAnimationFrame;\n\tvar cancelAnimationFrame = window.cancelAnimationFrame;\n\t// loop through vendor prefixes and get prefixed rAF and cAF\n\tvar prefix;\n\tfor( var i = 0; i < prefixes.length; i++ ) {\n\t\tif ( requestAnimationFrame && cancelAnimationFrame ) {\n\t\t\tbreak;\n\t\t}\n\t\tprefix = prefixes[i];\n\t\trequestAnimationFrame = requestAnimationFrame || window[ prefix + 'RequestAnimationFrame' ];\n\t\tcancelAnimationFrame  = cancelAnimationFrame  || window[ prefix + 'CancelAnimationFrame' ] ||\n\t\twindow[ prefix + 'CancelRequestAnimationFrame' ];\n\t}\n\n\t// fallback to setTimeout and clearTimeout if either request/cancel is not supported\n\tif ( !requestAnimationFrame || !cancelAnimationFrame ) {\n\t\trequestAnimationFrame = function( callback, element ) {\n\t\t\tvar currTime = new Date().getTime();\n\t\t\tvar timeToCall = Math.max( 0, 16 - ( currTime - lastTime ) );\n\t\t\tvar id = window.setTimeout( function() {\n\t\t\t\tcallback( currTime + timeToCall );\n\t\t\t}, timeToCall );\n\t\t\tlastTime = currTime + timeToCall;\n\t\t\treturn id;\n\t\t};\n\n\t\tcancelAnimationFrame = function( id ) {\n\t\t\twindow.clearTimeout( id );\n\t\t};\n\t}\n\n\tfunction throttle(fn, delay) {\n\t\tvar allowSample = true;\n\n\t\treturn function(e) {\n\t\t\tif (allowSample) {\n\t\t\t\tallowSample = false;\n\t\t\t\tsetTimeout(function() { allowSample = true; }, delay);\n\t\t\t\tfn(e);\n\t\t\t}\n\t\t};\n\t}\n\n\t// from http://www.quirksmode.org/js/events_properties.html#position\n\tfunction getMousePos(e) {\n\t\tvar posx = 0;\n\t\tvar posy = 0;\n\t\tif (!e) var e = window.event;\n\t\tif (e.pageX || e.pageY) \t{\n\t\t\tposx = e.pageX;\n\t\t\tposy = e.pageY;\n\t\t}\n\t\telse if (e.clientX || e.clientY) \t{\n\t\t\tposx = e.clientX + document.body.scrollLeft\n\t\t\t\t+ document.documentElement.scrollLeft;\n\t\t\tposy = e.clientY + document.body.scrollTop\n\t\t\t\t+ document.documentElement.scrollTop;\n\t\t}\n\t\treturn {\n\t\t\tx : posx,\n\t\t\ty : posy\n\t\t}\n\t}\n\n\t// equation of a line\n\tfunction lineEq(y2, y1, x2, x1, currentVal) {\n\t\t// y = mx + b\n\t\tvar m = (y2 - y1) / (x2 - x1),\n\t\t\tb = y1 - m * x1;\n\n\t\treturn m * currentVal + b;\n\t}\n\n\tvar support = {transitions : Modernizr.csstransitions},\n\t\ttransEndEventNames = {'WebkitTransition': 'webkitTransitionEnd', 'MozTransition': 'transitionend', 'OTransition': 'oTransitionEnd', 'msTransition': 'MSTransitionEnd', 'transition': 'transitionend'},\n\t\ttransEndEventName = transEndEventNames[Modernizr.prefixed('transition')],\n\t\tonEndTransition = function(el, callback) {\n\t\t\tvar onEndCallbackFn = function( ev ) {\n\t\t\t\tif( support.transitions ) {\n\t\t\t\t\tif( ev.target != this ) return;\n\t\t\t\t\tthis.removeEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t\t}\n\t\t\t\tif( callback && typeof callback === 'function' ) { callback.call(this); }\n\t\t\t};\n\t\t\tif( support.transitions ) {\n\t\t\t\tel.addEventListener( transEndEventName, onEndCallbackFn );\n\t\t\t}\n\t\t\telse {\n\t\t\t\tonEndCallbackFn();\n\t\t\t}\n\t\t},\n\t\t// main container\n\t\tcontainer = document.querySelector('.container'),\n\t\t// the 3D element - the room\n\t\troom = container.querySelector('.cube'),\n\t\t// the seat rows inside the 3D element\n\t\trows = [].slice.call(room.querySelectorAll('.rows > .row')),\n\t\t// total amount of rows\n\t\ttotalRows = rows.length,\n\t\t// seats\n\t\tseats = [].slice.call(room.querySelectorAll('.row__seat')),\n\t\t// the plan/map\n\t\tplan = document.querySelector('.plan'),\n\t\t// seats on the plan/map\n\t\tplanseats = [].slice.call(plan.querySelectorAll('.row__seat')),\n\t\t// the screen\n\t\tmonitor = room.querySelector('.screen'),\n\t\t// the video element\n\t\tvideo = monitor.querySelector('video'),\n\t\t// play video control\n\t\tplayCtrl = monitor.querySelector('button.action--play'),\n\t\t// intro element\n\t\tintro = monitor.querySelector('.intro'),\n\t\t// 'select your seats' control\n\t\tselectSeatsCtrl = intro.querySelector('button.action--seats'),\n\t\t// the tilt control\n\t\ttiltCtrl = document.querySelector('.action--lookaround'),\n\t\t// how much the camera rotates when the user moves the mouse\n\t\ttiltRotation = {\n\t\t\trotateX : 25, // a relative rotation of -25deg to 25deg on the x-axis\n\t\t\trotateY : 15  // a relative rotation of -15deg to 15deg on the y-axis\n\t\t},\n\t\t// controls whether the tilt is active or not\n\t\ttilt = false,\n\t\t// window sizes\n\t\twinsize = {width: window.innerWidth, height: window.innerHeight},\n\t\t// width of one seat\n\t\tseat_width = seats[0].offsetWidth,\n\t\t// number of seats per row\n\t\tseats_row = rows[0].children.length,\n\t\t// the sum of the room´s left margin with the room´s right margin is four times the width of a seat \n\t\tside_margin = 4 * seat_width,\n\t\t\n\t\t// if the following is changed, the CSS values also need to be adjusted (and vice-versa)\n\t\t// distance from first row to the screen\n\t\trow_front_gap = 800,\n\t\t// distance between rows\n\t\trow_back = 100,\n\t\t// the gap of seats in the middle of the room (equivalent to two columns of seats)\n\t\trow_gap_amount = 2,\n\t\t// perspective value\n\t\tperspective = 2000,\n\t\t// transition settings for the room animations (moving camera to seat)\n\t\ttransitionOpts = {'speed' : 1000, 'easing' : 'cubic-bezier(.7,0,.3,1)'},\n\n\t\t// the room dimentions\n\t\troomsize = {\n\t\t\tx : seats_row * seat_width + side_margin + row_gap_amount * seat_width,\n\t\t\ty : 1000, // SCSS $cube_y\n\t\t\tz : 3000 // SCSS $cube_z\n\t\t},\n\t\t// the initial values for the room transform\n\t\tinitTransform = {\n\t\t\ttranslateX : 0,\n\t\t\ttranslateY : roomsize.y/3.5, // view from top..\n\t\t\ttranslateZ : 0,\n\t\t\trotateX : -15, // ..looking down\n\t\t\trotateY : 0\n\t\t},\n\t\t// the current room transform\n\t\troomTransform = initTransform;\n\n\tfunction init() {\n\t\t// scale room to fit viewport\n\t\tscaleRoom();\n\t\t// initial view (zoomed screen)\n\t\tapplyRoomTransform({'translateX' : 0, 'translateY' : 0, 'translateZ' : 1300, 'rotateX' : 0, 'rotateY' : 0});\n\t\t// bind events\n\t\tinitEvents();\n\t}\n\n\tfunction applyRoomTransform(transform) {\n\t\troom.style.WebkitTransform = room.style.transform = transform ? 'translate3d(0,0,' + perspective + 'px) rotate3d(1,0,0,' + transform.rotateX + 'deg) rotate3d(0,1,0,' + transform.rotateY + 'deg) translate3d(' + transform.translateX + 'px, ' + transform.translateY + 'px, ' + transform.translateZ + 'px)'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  : 'translate3d(0,0,' + perspective + 'px) rotate3d(1,0,0,' + roomTransform.rotateX + 'deg) rotate3d(0,1,0,' + roomTransform.rotateY + 'deg) translate3d(' + roomTransform.translateX + 'px, ' + roomTransform.translateY + 'px, ' + roomTransform.translateZ + 'px)';\n\t}\n\n\tfunction applyRoomTransition(settings) {\n\t\tvar settings = settings || transitionOpts;\n\t\troom.style.WebkitTransition = '-webkit-transform ' + settings.speed + 'ms ' + settings.easing;\n\t\troom.style.transition = 'transform ' + settings.speed + 'ms ' + settings.easing;\n\t}\n\n\tfunction removeRoomTransition() {\n\t\troom.style.WebkitTransition = room.style.transition = 'none';\n\t}\n\n\tfunction scaleRoom() {\n\t\tvar factor = winsize.width / roomsize.x;\n\t\tcontainer.style.WebkitTransform = container.style.transform = 'scale3d(' + factor + ',' + factor + ',1)';\n\t}\n\n\tfunction initEvents() {\n\t\t// select a seat\n\t\tvar onSeatSelect = function(ev) { selectSeat(ev.target); };\n\t\tplanseats.forEach(function(planseat) {\n\t\t\tplanseat.addEventListener('click', onSeatSelect);\n\t\t});\n\n\t\t// enabling/disabling the tilt\n\t\tvar onTiltCtrlClick = function() {\n\t\t\t// if tilt is enabled..\n\t\t\tif( tilt ) {\n\t\t\t\tdisableTilt();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tenableTilt();\n\t\t\t}\n\t\t};\n\t\ttiltCtrl.addEventListener('click', onTiltCtrlClick);\n\n\t\t// mousemove event / tilt functionality\n\t\tvar onMouseMove = function(ev) {\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tif( !tilt ) return false;\n\n\t\t\t\tvar mousepos = getMousePos(ev),\n\t\t\t\t\t// transform values\n\t\t\t\t\trotX = tiltRotation.rotateX ? roomTransform.rotateX -  (2 * tiltRotation.rotateX / winsize.height * mousepos.y - tiltRotation.rotateX) : 0,\n\t\t\t\t\trotY = tiltRotation.rotateY ? roomTransform.rotateY +  (2 * tiltRotation.rotateY / winsize.width * mousepos.x - tiltRotation.rotateY) : 0;\n\t\t\n\t\t\t\t// apply transform\n\t\t\t\tapplyRoomTransform({'translateX' : roomTransform.translateX, 'translateY' : roomTransform.translateY, 'translateZ' : roomTransform.translateZ, 'rotateX' : rotX, 'rotateY' : rotY});\n\t\t\t});\n\t\t};\n\t\tdocument.addEventListener('mousemove', onMouseMove);\n\n\t\t// select seats control click (intro button): show the room layout\n\t\tvar onSelectSeats = function() { \n\t\t\tclassie.remove(intro, 'intro--shown');\n\t\t\tclassie.add(plan, 'plan--shown');\n\t\t\tclassie.add(playCtrl, 'action--faded');\n\t\t\tzoomOutScreen(function() {\n\t\t\t\tshowTiltCtrl();\n\t\t\t}); \n\t\t};\n\t\tselectSeatsCtrl.addEventListener('click', onSelectSeats);\n\n\t\t// play video\n\t\tplayCtrl.addEventListener('click', videoPlay);\n\t\t// ended video event\n\t\tvideo.addEventListener('ended', videoLoad);\n\n\t\t// window resize: update window size\n\t\twindow.addEventListener('resize', throttle(function(ev) {\n\t\t\twinsize = {width: window.innerWidth, height: window.innerHeight};\n\t\t\tscaleRoom();\n\t\t}, 10));\n\t}\n\n\tfunction showTiltCtrl() {\n\t\tclassie.add(tiltCtrl, 'action--shown');\n\t}\n\n\t// select a seat on the seat plan\n\tfunction selectSeat(planseat) {\n\t\tif( classie.has(planseat, 'row__seat--reserved') ) {\n\t\t\treturn false;\n\t\t}\n\t\tif( classie.has(planseat, 'row__seat--selected') ) {\n\t\t\tclassie.remove(planseat, 'row__seat--selected');\n\t\t\treturn false;\n\t\t}\n\t\t// add selected class\n\t\tclassie.add(planseat, 'row__seat--selected');\n\n\t\t// the real seat\n\t\tvar seat = seats[planseats.indexOf(planseat)];\n\t\t// show the seat´s perspective\n\t\tpreviewSeat(seat);\n\t}\n\n\t// preview perspective from the selected seat. Moves the camera to that position.\n\tfunction previewSeat(seat) {\n\t\t// disable tilt\n\t\tdisableTilt();\n\t\t// change transition properties\n\t\tapplyRoomTransition();\n\t\t// getComputedStyle: https://css-tricks.com/get-value-of-css-rotation-through-javascript/\n\t\tvar st = window.getComputedStyle(seat.parentNode, null),\n\t\t\ttr = st.getPropertyValue('-webkit-transform') ||\n\t\t\t\t st.getPropertyValue('-moz-transform') ||\n\t\t\t\t st.getPropertyValue('-ms-transform') ||\n\t\t\t\t st.getPropertyValue('-o-transform') ||\n\t\t\t\t st.getPropertyValue('transform') ||\n\t\t\t\t 'Either no transform set, or browser doesn´t do getComputedStyle';\n\t\t\t\n\t\tif( tr === 'none' ) return;\n\t\t\n\t\tvar values = tr.split('(')[1],\n\t\t\tvalues = values.split(')')[0],\n\t\t\tvalues = values.split(','),\n\t\t\t\n\t\t\t// translateY value of this seat´s row\n\t\t\ty = values[13],\n\t\t\t// translateZ value of this seat´s row\n\t\t\tz = values[14],\n\t\t\n\t\t\t// seat´s center point (x-axis)\n\t\t\tseatCenterX = seat.offsetLeft + side_margin/2 + seat.offsetWidth/2,\n\n\t\t\t// translateX, translateY and translateZ values\n\t\t\ttx = seatCenterX < roomsize.x/2 ? initTransform.translateX + (roomsize.x/2 - seatCenterX) : initTransform.translateX - (seatCenterX - roomsize.x/2),\n\t\t\tty = roomsize.y/2 - (roomsize.y - Math.abs(y)) + seat.offsetHeight + 10, // add a small extra\n\t\t\ttz = Math.abs(z)+10, // add a small extra\n\n\t\t\t// calculate how much to rotate in the x-axis (the more close to the screen the more we need to rotate)\n\t\t\tfirstRowZ = roomsize.z - row_front_gap,\n\t\t\tlastRowZ = firstRowZ - (totalRows - 1 + row_gap_amount) * row_back,\n\t\t\t\n\t\t\t// calculate how much to rotate in the y-axis (the more close to the screen the more we need to rotate.\n\t\t\t// Also the same applies when the distance from the center of the room to both sides increases.\n\t\t\t// for the last row:\n\t\t\tminRotY_1 = 0, maxRotY_1 = 20, // min and max values for y rotation\n\t\t\tinitialTranslationX = 0, finalTranslationX = roomsize.x/2,\n\t\t\trotY_1 = lineEq(minRotY_1, maxRotY_1, initialTranslationX, finalTranslationX, tx),\n\t\t\t// for the first row:\n\t\t\tminRotY_2 = 0, maxRotY_2 = 50, // min and max values for y rotation\n\t\t\trotY_2 = lineEq(minRotY_2, maxRotY_2, initialTranslationX, finalTranslationX, tx),\n\t\t\t// final:\n\t\t\trotY = lineEq(rotY_1, rotY_2, lastRowZ, firstRowZ, Math.abs(z));\n\n\t\t// room transforms\n\t\troomTransform = {\n\t\t\ttranslateX : tx,\n\t\t\ttranslateY : ty,\n\t\t\ttranslateZ : tz,\n\t\t\trotateX : 0,//rotX,\n\t\t\trotateY : rotY\n\t\t};\n\n\t\t// apply transform\n\t\tapplyRoomTransform();\n\t\t\n\t\tonEndTransition(room, function() {\n\t\t\tremoveRoomTransition();\n\t\t});\n\t}\n\n\tfunction zoomOutScreen(callback) {\n\t\tapplyRoomTransition({'speed' : 1500, 'easing' : 'ease'});\n\t\tapplyRoomTransform(initTransform);\n\t\tonEndTransition(room, function() {\n\t\t\tremoveRoomTransition();\n\t\t\tcallback.call();\n\t\t});\n\t}\n\n\tfunction disableTilt() {\n\t\tclassie.add(tiltCtrl, 'action--disabled');\n\t\ttilt = false;\n\t}\n\n\tfunction enableTilt() {\n\t\tclassie.remove(tiltCtrl, 'action--disabled');\n\t\ttilt = true;\n\t}\n\n\tfunction videoPlay() {\n\t\t// hide the play control\n\t\tclassie.remove(playCtrl, 'action--shown');\n\t\tvideo.currentTime = 0;\n\t\tvideo.play();\n\t}\n\n\tfunction videoLoad() {\n\t\t// show the play control\n\t\tclassie.add(playCtrl, 'action--shown');\n\t\tvideo.load();\n\t}\n\n\tinit();\n\n})(window);"]}